(this.webpackJsonpbillsplit=this.webpackJsonpbillsplit||[]).push([[0],{10:function(e,t,a){},11:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);a(10),a(11);var n,l,r,o,c=a(4),u=a(0),s=a.n(u),i=a(2),d=a(8);!function(e){e.INCREMENT_SHARES="share.inc",e.DECREMENT_SHARES="share.dec",e.CHANGE_SHARE_VALUE="share.change"}(n||(n={})),function(e){e.ADD_PERSON="person.add",e.REMOVE_PERSON="person.remove"}(l||(l={})),function(e){e.SET_SUBTOTAL="subtotal.set",e.SET_GRAND_TOTAL="grandtotal.set"}(r||(r={})),function(e){e.CALCULATE_RESULT="result.calc"}(o||(o={}));var m=a(3),p=a.n(m);function E(e,t){switch(t.type){case l.ADD_PERSON:return 30===e.people.length?e.people:Object(d.a)(e.people).concat([{shares:[0],personTotal:0}]);case l.REMOVE_PERSON:return 2===e.people.length?e.people:e.people.slice(0,-1);case n.INCREMENT_SHARES:case n.DECREMENT_SHARES:case n.CHANGE_SHARE_VALUE:return function(e,t){switch(t.type){case n.INCREMENT_SHARES:return e.map((function(e,a){return null!=t.payload&&null!=t.payload.index&&a===t.payload.index?Object(i.a)({},e,{shares:e.shares.concat([0])}):e}));case n.DECREMENT_SHARES:return e.map((function(e,a){return null!=t.payload&&null!=t.payload.index&&a===t.payload.index?Object(i.a)({},e,{shares:e.shares.slice(0,-1)}):e}));case n.CHANGE_SHARE_VALUE:return e.map((function(e,a){if(null!=t.payload&&null!=t.payload.shareIndex&&null!=t.payload.value&&a===t.payload.index){var n=e.shares;return n[t.payload.shareIndex]=t.payload.value,Object(i.a)({},e,{shares:n,personTotal:n.reduce((function(e,t){return e+t}))})}return e}));default:return e}}(e.people,t);default:return e.people}}function f(e,t){if(null==t.payload)return e.totals;switch(t.type){case r.SET_SUBTOTAL:return Object(i.a)({},e.totals,{subtotal:t.payload.value||0});case r.SET_GRAND_TOTAL:return Object(i.a)({},e.totals,{grandtotal:t.payload.value||0});default:return e.totals}}function v(e,t){switch(t.type){case o.CALCULATE_RESULT:var a=0,n=e.people.map((function(t,n){var l=t.personTotal/e.totals.subtotal;return a+=t.personTotal,{personalTotal:t.personTotal,percentOfGrandTotal:l,amountOwed:l*e.totals.grandtotal}}));return 0===e.totals.subtotal?(p()({text:"Enter a Subtotal!",confirmButtonColor:"#70d6ff"}),e.result):0===e.totals.grandtotal?(p()({text:"Enter a Grand Total!",confirmButtonColor:"#70d6ff"}),e.result):a.toFixed(2)!=e.totals.subtotal.toFixed(2)?(p()({text:"Items don't add up to subtotal!",confirmButtonColor:"#70d6ff"}),e.result):n.reduce((function(e,t){return e+t.amountOwed}),0).toFixed(2)!=e.totals.grandtotal.toFixed(2)?(p()({text:"Grand Total incorrect!",confirmButtonColor:"#70d6ff"}),e.result):{grandtotal:e.totals.grandtotal,subtotal:e.totals.subtotal,results:n};default:return e.result}}function h(e,t){return{people:E(e,t),totals:f(e,t),result:v(e,t)}}var T=s.a.createContext((function(e){})),g={people:[{shares:[0],personTotal:0},{shares:[0],personTotal:0}],totals:{subtotal:0,grandtotal:0},result:null};function b(e){var t=Object(u.useReducer)(h,g),a=Object(c.a)(t,2),n=a[0],l=a[1];return s.a.createElement(T.Provider,{value:l},e.children(n))}function y(){return s.a.createElement("div",{style:{fontSize:"12px",marginTop:"48px"}},s.a.createElement("hr",null),"Made with <3 by ",s.a.createElement("a",{href:"https://www.victorszeto.com"},"Victor Szeto"))}var N=a(6),S=a.n(N);function x(e){var t=e.children,a=e.className,n=e.onClick,l=e.type,r=e.disabled,o=e.disableInk;return s.a.createElement("button",{onClick:null!=n?n:void 0,className:null!=a?a:void 0,disabled:null!=r?r:void 0,type:null!=l?l:void 0},t,!o&&s.a.createElement(S.a,null))}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"$",l=2,r=8;if(null==e)return{value:0,maskedValue:"".concat(n,"0.00")};var o=String(e);if(0===o.length)return{value:0,maskedValue:"".concat(n,"0.00")};var c=o.match(/\d/g)||["0"];for(o.length>r&&c.pop();c.length<=l;)c.unshift("0");c.splice(c.length-l,0,"."),c=Number(c.join("")).toFixed(l).split("");var u=Number(c.join("")),s=c.length-l-1;c[s]=t;for(var i=s-3;i>0;i-=3)c.splice(i,0,a);return n.length>0&&c.unshift(n),{value:u,maskedValue:c.join("").trim()}}function C(e){var t=e.id,a=e.name,n=e.onChangeEvent,l=e.value,r=Object(u.useState)(A(l)),o=Object(c.a)(r,2),i=o[0],d=o[1];return s.a.createElement("div",{className:"col"},s.a.createElement("input",{key:a,className:"col",onChange:function(e){e.preventDefault();var t=A(e.currentTarget.value),a=t.maskedValue,l=t.value;d({maskedValue:a,value:l}),n(l)},prefix:"$",value:i.maskedValue,name:a||void 0,id:t||void 0}))}var R=a(1),O=a.n(R);function _(e){var t=e.idx,a=e.person,l=Object(u.useContext)(T),r=navigator.userAgent.match("Mobi");return s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{contentEditable:!0},"Person ",t+1),a.shares.length>1&&s.a.createElement("span",{style:{fontSize:"12px"}},"\xb7 Total: ".concat(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.personTotal))),s.a.createElement("div",{className:O()("row")},a.shares.map((function(e,a){return s.a.createElement(C,{key:a,onChangeEvent:function(e){return function(e,a){l({type:n.CHANGE_SHARE_VALUE,payload:{index:t,shareIndex:e,value:a}})}(a,e)},value:e,name:0===a?"person-".concat(t):void 0,id:0===a?"person-".concat(t):void 0})})),a.shares.length>1&&s.a.createElement(x,{className:"col-1",onClick:function(t){t.preventDefault(),l({type:n.DECREMENT_SHARES,payload:{index:e.idx}})}},r?"Remove Item":"-"),a.shares.length<=8&&s.a.createElement(x,{className:"col-1",onClick:function(t){t.preventDefault(),l({type:n.INCREMENT_SHARES,payload:{index:e.idx}})}},r?"Add Item":"+")))}function k(e){var t=Object(u.useContext)(T);return s.a.createElement(s.a.Fragment,null,s.a.createElement("h4",null,"Items"),s.a.createElement("div",null,e.people.map((function(e,t){return s.a.createElement(_,{person:e,idx:t,key:t})}))),s.a.createElement("div",null,s.a.createElement("strong",null,"Running Total:")," $",e.people.reduce((function(e,t){return e+t.shares.reduce((function(e,t){return e+t}),0)}),0)),s.a.createElement("div",{className:O()("row"),style:{marginTop:"32px"}},e.people.length<30&&s.a.createElement(x,{onClick:function(e){e.preventDefault(),t({type:l.ADD_PERSON})},className:O()("center","col","background-green")},"Add Person"),e.people.length>2&&s.a.createElement(x,{onClick:function(e){e.preventDefault(),t({type:l.REMOVE_PERSON})},className:O()("center","col","background-red"),disabled:2===e.people.length},"Remove Person")))}var w=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function D(e){var t=Object(u.useContext)(T),a=e.result;return s.a.createElement(s.a.Fragment,null,s.a.createElement(x,{className:O()("background-blue"),onClick:function(){return t({type:o.CALCULATE_RESULT})},type:"submit"},"Calculate"),a&&s.a.createElement(s.a.Fragment,null,s.a.createElement("hr",null),s.a.createElement("h4",null,"Results"),s.a.createElement("div",{className:"row",style:{borderBottom:"1px solid #111"}},s.a.createElement("div",{className:"col"},s.a.createElement("h6",null,"Person")),s.a.createElement("div",{className:"col"},s.a.createElement("h6",null,"Amount Owed")),s.a.createElement("div",{className:"col"},s.a.createElement("h6",null,"Breakdown"))),a.results.map((function(e,t){var n=e.personalTotal,l=e.percentOfGrandTotal,r=e.amountOwed;return s.a.createElement("div",{className:"row",key:t},s.a.createElement("div",{className:"col"},"Person ",t+1),s.a.createElement("div",{className:"col",style:{fontWeight:"bold"}},w.format(r)),s.a.createElement("div",{className:"col"},w.format(n),s.a.createElement("span",{style:{fontSize:"12px"}}," (Items)")," + ",w.format(l*(a.grandtotal-a.subtotal)),s.a.createElement("span",{style:{fontSize:"12px"}}," (Tax & Tip)")))}))))}function L(e){var t=Object(u.useContext)(T),a=e.totals,n=a.grandtotal,l=a.subtotal;return s.a.createElement(s.a.Fragment,null,s.a.createElement("h4",{className:O()("row")},"Totals"),s.a.createElement("div",{className:O()("row")},s.a.createElement("div",{className:O()("col")},s.a.createElement("label",{htmlFor:"subtotal"},"Subtotal"),s.a.createElement("span",{style:{fontSize:"12px"}},"\xb7 ","Sum of the prices of all items"),s.a.createElement(C,{onChangeEvent:function(e){t({type:r.SET_SUBTOTAL,payload:{value:e}})},value:l,name:"subtotal",id:"subtotal"}))),s.a.createElement("div",{className:O()("row")},s.a.createElement("div",{className:O()("col")},s.a.createElement("label",{htmlFor:"grandTotal"},"Grand Total"),s.a.createElement("span",{style:{fontSize:"12px"}},"\xb7 ","Entire amount paid, including tax and tip"),s.a.createElement(C,{onChangeEvent:function(e){t({type:r.SET_GRAND_TOTAL,payload:{value:e}})},value:n,name:"grandTotal",id:"grandTotal"}))))}var j=a(7),U=a.n(j),H=document.getElementById("root");U.a.render(s.a.createElement((function(){return s.a.createElement(b,null,(function(e){return s.a.createElement("div",{className:"container center"},s.a.createElement("h1",null,"billsplit"),s.a.createElement(k,{people:e.people}),s.a.createElement("hr",null),s.a.createElement(L,{totals:e.totals}),s.a.createElement(D,{result:e.result}),s.a.createElement(y,null))}))}),null),H)},9:function(e,t,a){e.exports=a(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.52a9d1e3.chunk.js.map